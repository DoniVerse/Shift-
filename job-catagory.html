<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legal Career Platform - Job Categories</title>
    <link rel="stylesheet" href="job-categories-styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">S</div>
            <h1 class="page-title">Job Listing</h1>
            <div class="spacer"></div>
        </div>



        <div class="content">
            <div class="job-categories-grid">
                <div class="job-category-card" onclick="selectJobCategory('legal-filings')">
                    <div class="card-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
                            <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <polyline points="10,9 9,9 8,9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <h3 class="card-title">Preparing Legal Filings & Case Documents</h3>
                    <div class="card-rating">
                        <div class="stars">
                            <span class="star filled">★</span>
                            <span class="star filled">★</span>
                            <span class="star filled">★</span>
                            <span class="star filled">★</span>
                            <span class="star">★</span>
                        </div>
                    </div>
                </div>

                <div class="job-category-card" onclick="selectJobCategory('document-summary')">
                    <div class="card-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
                            <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M16 13H8M16 17H8M10 9H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" class="overlay-icon">
                            <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <h3 class="card-title">Summarizing Legal Documents</h3>
                    <div class="card-rating">
                        <div class="stars">
                            <span class="star filled">★</span>
                            <span class="star filled">★</span>
                            <span class="star filled">★</span>
                            <span class="star filled">★</span>
                            <span class="star filled">★</span>
                        </div>
                    </div>
                </div>

                <div class="job-category-card" onclick="selectJobCategory('corporate-advisory')">
                    <div class="card-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
                            <path d="M16 21V19C16 17.9391 15.5786 16.9217 14.8284 16.1716C14.0783 15.4214 13.0609 15 12 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <circle cx="8.5" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                            <path d="M23 21V19C23 18.1332 22.7361 17.2986 22.2416 16.5956C21.7471 15.8927 21.0424 15.3581 20.2209 15.0657" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M16 3.13C16.8604 3.35031 17.623 3.85071 18.1676 4.55232C18.7122 5.25392 18.9078 6.11683 18.7563 6.96353C18.6047 7.81023 18.1147 8.58044 17.3789 9.10338C16.6431 9.62632 15.7556 9.86614 14.8889 9.7859" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <h3 class="card-title">Legal Research Assistance</h3>
                    <div class="card-rating">
                        <div class="stars">
                            <span class="star filled">★</span>
                            <span class="star filled">★</span>
                            <span class="star filled">★</span>
                            <span class="star filled">★</span>
                            <span class="star">★</span>
                        </div>
                    </div>
                </div>

                <div class="job-category-card" onclick="selectJobCategory('legal-research')">
                    <div class="card-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
                            <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <circle cx="11" cy="14" r="2" stroke="currentColor" stroke-width="2"/>
                            <path d="M13.5 16.5L15.5 18.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <h3 class="card-title">preparing Legal fillings and case documents</h3>
                    <div class="card-rating">
                        <div class="stars">
                            <span class="star filled">★</span>
                            <span class="star filled">★</span>
                            <span class="star filled">★</span>
                            <span class="star filled">★</span>
                            <span class="star filled">★</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="bottom-nav">
            <a href="dashboard.html" class="nav-item active">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Home</span>
            </a>
            <a href="chat.html" class="nav-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Messages</span>
            </a>
            <a href="employer-profile.html" class="nav-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                </svg>
                <span>Profile</span>
            </a>
            <!-- Applications nav item -->
            <a href="#" class="nav-item" id="applicationsNav">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M8 6H21M8 12H21M8 18H21M3 6H3.01M3 12H3.01M3 18H3.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Applications</span>
            </a>
        </div>
        <div id="applicationsModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.5);z-index:9999;align-items:center;justify-content:center;"></div>
    </div>

    <script type="module">
  import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js';
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js';

  const firebaseConfig = {
    apiKey: "AIzaSyA2Is7jXaYL4k04tSaI-CRzmtisQ5VSmz4",
    authDomain: "shift-3140e.firebaseapp.com",
    projectId: "shift-3140e",
    storageBucket: "shift-3140e.firebasestorage.app",
    messagingSenderId: "716245939154",
    appId: "1:716245939154:web:64d567a1ded3fa98b34e0b",
    measurementId: "G-F6WJ0T3E71"
  };

  if (!window.firebaseApp) {
    window.firebaseApp = initializeApp(firebaseConfig);
  }
  const auth = getAuth();

  onAuthStateChanged(auth, (user) => {
    console.log('🔍 Firebase Auth State:', user ? 'Signed in' : 'Not signed in');

    // Check if user is signed in through localStorage instead
    const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
    const employerInfo = JSON.parse(localStorage.getItem('employerInfo') || '{}');

    if (!user && !currentUser.email && !employerInfo.email) {
      console.log('❌ No authentication found, redirecting to signin');
      window.location.href = 'employer-signin.html';
    } else {
      console.log('✅ User authenticated via:', user ? 'Firebase' : 'localStorage');
    }
  });
</script>

    <script>
        function selectJobCategory(category) {
            // Store the selected category
            localStorage.setItem('selectedJobCategory', category);

            // Get category details
            const categoryDetails = {
                'legal-filings': {
                    title: 'Preparing Legal Filings & Case Documents',
                    description: 'Create and prepare legal documents, filings, and case materials'
                },
                'document-summary': {
                    title: 'Summarizing Legal Documents',
                    description: 'Review and summarize complex legal documents and contracts'
                },
                'corporate-advisory': {
                    title: 'Corporate Legal Advisory Support',
                    description: 'Provide legal advisory support for corporate matters and compliance'
                },
                'legal-research': {
                    title: 'Legal Research Assistance',
                    description: 'Conduct thorough legal research and analysis on various topics'
                }
            };

            const selected = categoryDetails[category];

            // Redirect directly to add job page with pre-filled category
            window.location.href = `add-job.html?category=${category}&title=${encodeURIComponent(selected.title)}`;
        }

        document.addEventListener('DOMContentLoaded', function() {
            const user = JSON.parse(localStorage.getItem('currentUser') || '{}');
            if (user.userType !== 'employer') {
                alert('Access denied. Only employers can access this page.');
                window.location.href = 'student-profile.html';
            }
        });


    </script>

    <!-- Chat Integration -->
    <script src="chat-integration-widget.js"></script>
    <script src="chat-buttons.js"></script>
    <script>
document.getElementById('applicationsNav').onclick = function(e) {
    e.preventDefault();
    const employer = JSON.parse(localStorage.getItem('employerInfo') || '{}');
    const jobs = JSON.parse(localStorage.getItem('jobs') || '[]');
    const applications = JSON.parse(localStorage.getItem('jobApplications') || '[]');
    // Find jobs posted by this employer
    const myJobs = jobs.filter(job => job.employerEmail === employer.email);
    // Find applications for these jobs
    const myJobTitles = myJobs.map(j => j.title);
    const myApplications = applications.filter(app => myJobTitles.includes(app.jobTitle));
    const modal = document.getElementById('applicationsModal');
    if (!myApplications.length) {
        modal.innerHTML = `<div style='background:#fff;padding:24px 20px 20px 20px;border-radius:12px;max-width:400px;width:90vw;position:relative;'><button id='closeApplicationsModal' style='position:absolute;top:10px;right:10px;background:none;border:none;font-size:1.5rem;cursor:pointer;'>&times;</button><h2>Applications</h2><div>No applications yet.</div></div>`;
        modal.style.display = 'flex';
        document.getElementById('closeApplicationsModal').onclick = function() { modal.style.display = 'none'; };
        return;
    }
    let html = `<div style='background:#fff;padding:24px 20px 20px 20px;border-radius:12px;max-width:400px;width:90vw;position:relative;'><button id='closeApplicationsModal' style='position:absolute;top:10px;right:10px;background:none;border:none;font-size:1.5rem;cursor:pointer;'>&times;</button><h2>Applications</h2>`;
    myApplications.forEach((app, idx) => {
        html += `<div class='application-card' style='border:1px solid #e1e5e9;border-radius:8px;padding:12px;margin-bottom:12px;cursor:pointer;' data-idx='${idx}'>
            <div><strong>Job:</strong> ${app.jobTitle}</div>
            <div><strong>Student:</strong> ${app.student}</div>
            <div><strong>Date:</strong> ${app.dateApplied}</div>
            <div><strong>Status:</strong> ${app.status}</div>
        </div>`;
    });
    html += `</div>`;
    modal.innerHTML = html;
    modal.style.display = 'flex';
    document.getElementById('closeApplicationsModal').onclick = function() { modal.style.display = 'none'; };
    // Add click handler for each application card
    modal.querySelectorAll('.application-card').forEach(card => {
        card.onclick = function() {
            const idx = this.getAttribute('data-idx');
            const app = myApplications[idx];
            // Get student info
            const students = [JSON.parse(localStorage.getItem('currentUser') || '{}')];
            const student = students.find(s => s.email === app.student) || {};
            const resume = JSON.parse(localStorage.getItem('resumeData') || '{}');
            const education = JSON.parse(localStorage.getItem('educationData') || '{}');
            let details = `<div style='background:#fff;padding:24px 20px 20px 20px;border-radius:12px;max-width:400px;width:90vw;position:relative;'><button id='closeStudentModal' style='position:absolute;top:10px;right:10px;background:none;border:none;font-size:1.5rem;cursor:pointer;'>&times;</button><h2>Student Info</h2>`;
            details += `<div><strong>Name:</strong> ${student.name || app.student}</div>`;
            details += `<div><strong>Year of Study:</strong> ${student.yearOfStudy || ''}</div>`;
            if (resume.fileName) details += `<div><strong>Resume/CV:</strong> ${resume.fileName}</div>`;
            if (education.gpa) details += `<div><strong>GPA:</strong> ${education.gpa}</div>`;
            if (education.graduationDate) details += `<div><strong>Expected Graduation:</strong> ${education.graduationDate}</div>`;
            details += `<button id='acceptStudentBtn' style='width:100%;padding:10px 0;background:#22c55e;color:#fff;border:none;border-radius:6px;font-size:1rem;cursor:pointer;margin-top:16px;'>Accept</button>`;
            details += `</div>`;
            modal.innerHTML = details;
            document.getElementById('closeStudentModal').onclick = function() { modal.style.display = 'none'; };
            document.getElementById('acceptStudentBtn').onclick = function() {
                // Store notification for student
                const notifications = JSON.parse(localStorage.getItem('studentNotifications') || '[]');
                notifications.push({
                    email: app.student,
                    message: `You have been accepted for the job: ${app.jobTitle}`,
                    date: new Date().toLocaleString()
                });
                localStorage.setItem('studentNotifications', JSON.stringify(notifications));
                alert('Student accepted and notified!');
                modal.style.display = 'none';
            };
        };
    });
};
</script>
</body>
</html>
